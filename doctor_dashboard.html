{% extends "base.html" %}
{% block title %}Doctor Dashboard{% endblock %}
{% block content %}
<h2>Doctor Dashboard â€” {{ current_user.username }}</h2>

<h3>Assigned Appointments</h3>
{% if appointments %}
  {% for a in appointments %}
    <div style="background:white;padding:12px;border-radius:8px;margin-bottom:10px;">
      <strong>{{ a.date }} {{ a.time }}</strong><br/>
      Patient: {{ a.user.username if a.user else 'Unknown' }}<br/>
      Status: {{ a.status }}
      <form method="POST" action="{{ url_for('update_appointment', appt_id=a.id) }}" style="margin-top:8px;">
        <select name="status">
          <option value="Booked" {% if a.status=='Booked' %}selected{% endif %}>Booked</option>
          <option value="Completed" {% if a.status=='Completed' %}selected{% endif %}>Completed</option>
          <option value="Cancelled" {% if a.status=='Cancelled' %}selected{% endif %}>Cancelled</option>
        </select>
        <input name="treatment_name" placeholder="Treatment name (optional)"/>
        <input name="diagnosis" placeholder="Diagnosis (optional)"/>
        <button type="submit" style="padding:6px 10px;">Update</button>
      </form>
    </div>
  {% endfor %}
{% else %}
  <p>No appointments assigned.</p>
{% endif %}
{% endblock %}
