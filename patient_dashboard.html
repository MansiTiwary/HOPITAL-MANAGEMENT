{% extends "base.html" %}
{% block title %}Patient Dashboard{% endblock %}
{% block head %}
<style>
.card { background:white;padding:12px;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.04); margin-bottom:12px; }
</style>
{% endblock %}
{% block content %}
<h2>Welcome, {{ current_user.username }}</h2>

<h3>Your Appointments</h3>
{% if appointments %}
  {% for a in appointments %}
    <div class="card">
      <strong>Date:</strong> {{ a.date }} &nbsp; <strong>Time:</strong> {{ a.time }} <br/>
      <strong>Doctor:</strong> {{ a.doctor.username if a.doctor else 'TBD' }} <br/>
      <strong>Status:</strong> {{ a.status }}
    </div>
  {% endfor %}
{% else %}
  <p>No appointments yet.</p>
{% endif %}

<h3>Book Appointment</h3>
<form method="POST" action="{{ url_for('book_appointment') }}">
  <div>
    <label>Doctor</label>
    <select name="doctor_id" required>
      {% for d in doctors %}
        <option value="{{ d.id }}">{{ d.username }} - {{ d.department.name if d.department else 'General' }}</option>
      {% endfor %}
    </select>
  </div>
  <div>
    <label>Date</label>
    <input type="date" name="date" required />
  </div>
  <div>
    <label>Time</label>
    <input type="time" name="time" required />
  </div>
  <div>
    <label>Treatment (optional)</label>
    <input name="treatment_name" />
  </div>
  <button style="margin-top:10px;padding:8px 14px;background:#667eea;color:#fff;border:none;border-radius:6px;">Book</button>
</form>
{% endblock %}
